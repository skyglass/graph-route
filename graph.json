{
  "id": "invoice:2:07bc6830-dc12-11e8-a8e9-0242ac110002",
  "bpmn20Xml": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:camunda=\"http://camunda.org/schema/1.0/bpmn\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" xmlns:signavio=\"http://www.signavio.com\" id=\"sid-0b0aaa25-3baf-4875-9d7a-0907d599a9ef\" targetNamespace=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" exporter=\"Camunda Modeler\" exporterVersion=\"1.10.0\" xsi:schemaLocation=\"http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd\">\n  <dataStore id=\"FinancialAccountingSystem\" name=\"Financial Accounting System\" isUnlimited=\"false\">\n    <dataState id=\"DataState_1\" />\n  </dataStore>\n  <message id=\"foxMessage_en\" name=\"foxMessage_en\" />\n  <collaboration id=\"collaboration_3\">\n    <participant id=\"Process_Engine_1\" name=\"Invoice Receipt\" processRef=\"invoice\" />\n  </collaboration>\n  <process id=\"invoice\" name=\"Invoice Receipt\" isExecutable=\"true\" camunda:versionTag=\"V2.0\" camunda:historyTimeToLive=\"45\">\n    <laneSet id=\"laneSet_5\">\n      <lane id=\"Approver\" name=\"Approver\">\n        <flowNodeRef>approveInvoice</flowNodeRef>\n        <flowNodeRef>invoice_approved</flowNodeRef>\n      </lane>\n      <lane id=\"teamAssistant\" name=\"Team Assistant\">\n        <flowNodeRef>reviewSuccessful_gw</flowNodeRef>\n        <flowNodeRef>assignApprover</flowNodeRef>\n        <flowNodeRef>StartEvent_1</flowNodeRef>\n        <flowNodeRef>invoiceNotProcessed</flowNodeRef>\n        <flowNodeRef>reviewInvoice</flowNodeRef>\n      </lane>\n      <lane id=\"Accountant\" name=\"Accountant\">\n        <flowNodeRef>prepareBankTransfer</flowNodeRef>\n        <flowNodeRef>invoiceProcessed</flowNodeRef>\n        <flowNodeRef>ServiceTask_1</flowNodeRef>\n      </lane>\n    </laneSet>\n    <userTask id=\"approveInvoice\" name=\"Approve Invoice\" camunda:formKey=\"embedded:app:forms/approve-invoice.html\" camunda:candidateGroups=\"${approverGroups}\" camunda:dueDate=\"${dateTime().plusWeeks(1).toDate()}\">\n      <documentation>Approve the invoice (or not).</documentation>\n      <extensionElements>\n        <camunda:taskListener event=\"create\">\n          <camunda:script scriptFormat=\"javascript\"><![CDATA[if(!!task.getVariable('approver')) {\n  task.setAssignee(approver);\n}]]></camunda:script>\n        </camunda:taskListener>\n        <camunda:taskListener event=\"assignment\">\n          <camunda:script scriptFormat=\"javascript\"><![CDATA[task.setVariable('approver', task.getAssignee());]]></camunda:script>\n        </camunda:taskListener>\n      </extensionElements>\n      <incoming>sequenceFlow_178</incoming>\n      <incoming>reviewSuccessful</incoming>\n      <outgoing>sequenceFlow_180</outgoing>\n    </userTask>\n    <exclusiveGateway id=\"invoice_approved\" name=\"Invoice&#10;approved?\" gatewayDirection=\"Diverging\">\n      <incoming>sequenceFlow_180</incoming>\n      <outgoing>invoiceNotApproved</outgoing>\n      <outgoing>invoiceApproved</outgoing>\n    </exclusiveGateway>\n    <exclusiveGateway id=\"reviewSuccessful_gw\" name=\"Review&#10;successful?\" gatewayDirection=\"Diverging\">\n      <incoming>sequenceFlow_183</incoming>\n      <outgoing>reviewNotSuccessful</outgoing>\n      <outgoing>reviewSuccessful</outgoing>\n    </exclusiveGateway>\n    <userTask id=\"prepareBankTransfer\" name=\"Prepare&#10;Bank&#10;Transfer\" camunda:formKey=\"embedded:app:forms/prepare-bank-transfer.html\" camunda:candidateGroups=\"accounting\" camunda:dueDate=\"${dateTime().plusWeeks(1).toDate()}\">\n      <documentation>Prepare the bank transfer.</documentation>\n      <incoming>invoiceApproved</incoming>\n      <outgoing>SequenceFlow_2</outgoing>\n    </userTask>\n    <sequenceFlow id=\"invoiceNotApproved\" name=\"no\" isImmediate=\"true\" sourceRef=\"invoice_approved\" targetRef=\"reviewInvoice\">\n      <conditionExpression xsi:type=\"tFormalExpression\" id=\"conditionExpression_56\">${!approved}</conditionExpression>\n    </sequenceFlow>\n    <sequenceFlow id=\"sequenceFlow_180\" isImmediate=\"true\" sourceRef=\"approveInvoice\" targetRef=\"invoice_approved\" />\n    <sequenceFlow id=\"sequenceFlow_183\" isImmediate=\"true\" sourceRef=\"reviewInvoice\" targetRef=\"reviewSuccessful_gw\" />\n    <sequenceFlow id=\"invoiceApproved\" name=\"yes\" isImmediate=\"true\" sourceRef=\"invoice_approved\" targetRef=\"prepareBankTransfer\">\n      <conditionExpression xsi:type=\"tFormalExpression\" id=\"conditionExpression_63\">${approved}</conditionExpression>\n    </sequenceFlow>\n    <sequenceFlow id=\"reviewNotSuccessful\" name=\"no\" isImmediate=\"true\" sourceRef=\"reviewSuccessful_gw\" targetRef=\"invoiceNotProcessed\">\n      <conditionExpression xsi:type=\"tFormalExpression\">${!clarified}</conditionExpression>\n    </sequenceFlow>\n    <sequenceFlow id=\"reviewSuccessful\" name=\"yes\" isImmediate=\"true\" sourceRef=\"reviewSuccessful_gw\" targetRef=\"approveInvoice\">\n      <conditionExpression xsi:type=\"tFormalExpression\">${clarified}</conditionExpression>\n    </sequenceFlow>\n    <dataStoreReference id=\"DataStoreReference_1\" name=\"Financial Accounting System\" dataStoreRef=\"FinancialAccountingSystem\" />\n    <businessRuleTask id=\"assignApprover\" name=\"Assign Approver Group\" camunda:resultVariable=\"approverGroups\" camunda:decisionRef=\"invoice-assign-approver\" camunda:mapDecisionResult=\"collectEntries\">\n      <incoming>SequenceFlow_1</incoming>\n      <outgoing>sequenceFlow_178</outgoing>\n    </businessRuleTask>\n    <sequenceFlow id=\"sequenceFlow_178\" isImmediate=\"true\" sourceRef=\"assignApprover\" targetRef=\"approveInvoice\" />\n    <sequenceFlow id=\"SequenceFlow_2\" name=\"\" sourceRef=\"prepareBankTransfer\" targetRef=\"ServiceTask_1\" />\n    <startEvent id=\"StartEvent_1\" name=\"Invoice&#10;received\" camunda:formKey=\"embedded:app:forms/start-form.html\">\n      <outgoing>SequenceFlow_1</outgoing>\n    </startEvent>\n    <sequenceFlow id=\"SequenceFlow_1\" name=\"\" sourceRef=\"StartEvent_1\" targetRef=\"assignApprover\" />\n    <endEvent id=\"invoiceNotProcessed\" name=\"Invoice not&#10;processed\">\n      <incoming>reviewNotSuccessful</incoming>\n    </endEvent>\n    <endEvent id=\"invoiceProcessed\" name=\"Invoice&#10;processed\">\n      <incoming>SequenceFlow_3</incoming>\n    </endEvent>\n    <serviceTask id=\"ServiceTask_1\" name=\"Archive Invoice\" camunda:async=\"true\" camunda:class=\"org.camunda.bpm.example.invoice.service.ArchiveInvoiceService\">\n      <incoming>SequenceFlow_2</incoming>\n      <outgoing>SequenceFlow_3</outgoing>\n    </serviceTask>\n    <sequenceFlow id=\"SequenceFlow_3\" name=\"\" sourceRef=\"ServiceTask_1\" targetRef=\"invoiceProcessed\" />\n    <callActivity id=\"reviewInvoice\" name=\"Review Invoice\" camunda:caseRef=\"ReviewInvoiceCase\">\n      <extensionElements>\n        <camunda:in source=\"invoiceDocument\" target=\"invoiceDocument\" />\n        <camunda:out source=\"clarified\" target=\"clarified\" />\n        <camunda:in source=\"creditor\" target=\"creditor\" />\n        <camunda:in source=\"amount\" target=\"amount\" />\n        <camunda:in source=\"invoiceCategory\" target=\"invoiceCategory\" />\n        <camunda:in source=\"invoiceNumber\" target=\"invoiceNumber\" />\n      </extensionElements>\n      <incoming>invoiceNotApproved</incoming>\n      <outgoing>sequenceFlow_183</outgoing>\n    </callActivity>\n    <association id=\"Association_1\" sourceRef=\"DataStoreReference_1\" targetRef=\"prepareBankTransfer\" />\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_73\">\n    <bpmndi:BPMNPlane id=\"BPMNPlane_73\" bpmnElement=\"collaboration_3\">\n      <bpmndi:BPMNShape id=\"Process_Engine_1_gui\" bpmnElement=\"Process_Engine_1\" isHorizontal=\"true\">\n        <omgdc:Bounds x=\"0\" y=\"0\" width=\"1009\" height=\"486\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Freigebender_105_gui\" bpmnElement=\"Approver\" isHorizontal=\"true\">\n        <omgdc:Bounds x=\"30\" y=\"182\" width=\"979\" height=\"161\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Team-Assistenz_110_gui\" bpmnElement=\"teamAssistant\" isHorizontal=\"true\">\n        <omgdc:Bounds x=\"30\" y=\"0\" width=\"979\" height=\"183\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Buchhaltung_119_gui\" bpmnElement=\"Accountant\" isHorizontal=\"true\">\n        <omgdc:Bounds x=\"30\" y=\"342\" width=\"979\" height=\"144\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Rechnung_freigeben_125_gui\" bpmnElement=\"approveInvoice\" isHorizontal=\"true\">\n        <omgdc:Bounds x=\"353\" y=\"224\" width=\"100\" height=\"80\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Freigabe_erfolgt__131_gui\" bpmnElement=\"invoice_approved\" isHorizontal=\"true\" isMarkerVisible=\"true\">\n        <omgdc:Bounds x=\"488\" y=\"244\" width=\"40\" height=\"40\" />\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds x=\"455\" y=\"289\" width=\"107\" height=\"22\" />\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Freigebenden_zuordnen_143_gui\" bpmnElement=\"assignApprover\" isHorizontal=\"true\">\n        <omgdc:Bounds x=\"180\" y=\"52\" width=\"100\" height=\"80\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Kl_rung_erfolgreich__153_gui\" bpmnElement=\"reviewSuccessful_gw\" isHorizontal=\"true\" isMarkerVisible=\"true\">\n        <omgdc:Bounds x=\"693\" y=\"72\" width=\"40\" height=\"40\" />\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds x=\"656\" y=\"117\" width=\"114\" height=\"22\" />\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"endEvent_165_gui\" bpmnElement=\"invoiceNotProcessed\" isHorizontal=\"true\">\n        <omgdc:Bounds x=\"912\" y=\"78\" width=\"28\" height=\"28\" />\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds x=\"861\" y=\"111\" width=\"131\" height=\"22\" />\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"zberweisung_vorbereiten_169_gui\" bpmnElement=\"prepareBankTransfer\" isHorizontal=\"true\">\n        <omgdc:Bounds x=\"638\" y=\"383\" width=\"100\" height=\"80\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Rechnungseingang_abgearbeitet_174_gui\" bpmnElement=\"invoiceProcessed\" isHorizontal=\"true\">\n        <omgdc:Bounds x=\"929\" y=\"409\" width=\"28\" height=\"28\" />\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds x=\"889\" y=\"442\" width=\"109\" height=\"22\" />\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"DataStoreReference_1_gui\" bpmnElement=\"DataStoreReference_1\" isHorizontal=\"true\">\n        <omgdc:Bounds x=\"574\" y=\"516\" width=\"63\" height=\"61\" />\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds x=\"517\" y=\"582\" width=\"176\" height=\"22\" />\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge id=\"Nein_182_gui\" bpmnElement=\"invoiceNotApproved\" sourceElement=\"Freigabe_erfolgt__131_gui\" targetElement=\"Rechnung_kl_ren_148_gui\">\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"508\" y=\"244\" />\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"508\" y=\"92\" />\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"548\" y=\"92\" />\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds x=\"447\" y=\"216\" width=\"90\" height=\"26\" />\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"sequenceFlow_180_gui\" bpmnElement=\"sequenceFlow_180\" sourceElement=\"Rechnung_freigeben_125_gui\" targetElement=\"Freigabe_erfolgt__131_gui\">\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"453\" y=\"264\" />\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"488\" y=\"264\" />\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds x=\"471\" y=\"264\" width=\"0\" height=\"0\" />\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"sequenceFlow_183_gui\" bpmnElement=\"sequenceFlow_183\" sourceElement=\"Rechnung_kl_ren_148_gui\" targetElement=\"Kl_rung_erfolgreich__153_gui\">\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"648\" y=\"92\" />\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"693\" y=\"92\" />\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds x=\"625.5\" y=\"77\" width=\"90\" height=\"0\" />\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"sequenceFlow_178_gui\" bpmnElement=\"sequenceFlow_178\" sourceElement=\"Freigebenden_zuordnen_143_gui\" targetElement=\"Rechnung_freigeben_125_gui\">\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"280\" y=\"92\" />\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"310\" y=\"92\" />\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"310\" y=\"264\" />\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"353\" y=\"264\" />\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds x=\"310\" y=\"185\" width=\"0\" height=\"0\" />\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"Association_1_gui\" bpmnElement=\"Association_1\" sourceElement=\"DataStoreReference_1_gui\" targetElement=\"zberweisung_vorbereiten_169_gui\">\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"625\" y=\"516\" />\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"661\" y=\"463\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"Ja_181_gui\" bpmnElement=\"invoiceApproved\" sourceElement=\"Freigabe_erfolgt__131_gui\" targetElement=\"zberweisung_vorbereiten_169_gui\">\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"528\" y=\"264\" />\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"587\" y=\"264\" />\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"587\" y=\"423\" />\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"638\" y=\"423\" />\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds x=\"540\" y=\"237\" width=\"32\" height=\"26\" />\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"nein_185_gui\" bpmnElement=\"reviewNotSuccessful\" sourceElement=\"Kl_rung_erfolgreich__153_gui\" targetElement=\"endEvent_165_gui\">\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"733\" y=\"92\" />\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"912\" y=\"92\" />\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds x=\"744\" y=\"91\" width=\"24\" height=\"26\" />\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"ja_186_gui\" bpmnElement=\"reviewSuccessful\" sourceElement=\"Kl_rung_erfolgreich__153_gui\" targetElement=\"Rechnung_freigeben_125_gui\">\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"713\" y=\"72\" />\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"713\" y=\"35\" />\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"403\" y=\"35\" />\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"403\" y=\"224\" />\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds x=\"720\" y=\"36\" width=\"32\" height=\"26\" />\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"BPMNEdge_SequenceFlow_1\" bpmnElement=\"SequenceFlow_2\" sourceElement=\"zberweisung_vorbereiten_169_gui\" targetElement=\"_BPMNShape_ServiceTask_2\">\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"738\" y=\"423\" />\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"780\" y=\"423\" />\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds x=\"745\" y=\"423\" width=\"6\" height=\"6\" />\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNShape id=\"_BPMNShape_StartEvent_3\" bpmnElement=\"StartEvent_1\">\n        <omgdc:Bounds x=\"96\" y=\"78\" width=\"28\" height=\"28\" />\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds x=\"62\" y=\"111\" width=\"96\" height=\"22\" />\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge id=\"BPMNEdge_SequenceFlow_2\" bpmnElement=\"SequenceFlow_1\" sourceElement=\"_BPMNShape_StartEvent_3\" targetElement=\"Freigebenden_zuordnen_143_gui\">\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"124\" y=\"92\" />\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"180\" y=\"92\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNShape id=\"_BPMNShape_ServiceTask_2\" bpmnElement=\"ServiceTask_1\">\n        <omgdc:Bounds x=\"780\" y=\"383\" width=\"100\" height=\"80\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge id=\"BPMNEdge_SequenceFlow_3\" bpmnElement=\"SequenceFlow_3\" sourceElement=\"_BPMNShape_ServiceTask_2\" targetElement=\"Rechnungseingang_abgearbeitet_174_gui\">\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"880\" y=\"423\" />\n        <omgdi:waypoint xsi:type=\"omgdc:Point\" x=\"929\" y=\"423\" />\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds x=\"913\" y=\"423\" width=\"6\" height=\"6\" />\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNShape id=\"Rechnung_kl_ren_148_gui\" bpmnElement=\"reviewInvoice\">\n        <omgdc:Bounds x=\"548\" y=\"52\" width=\"100\" height=\"80\" />\n      </bpmndi:BPMNShape>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>\n"
}